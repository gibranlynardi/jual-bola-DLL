<div id="loginModal" style="display: none; position: fixed; z-index: 50; top: 0; left: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(17, 24, 39, 0.6); backdrop-filter: blur(5px);">
    <div class="max-w-md w-full mx-auto my-12">
        <div class="glassmorphism p-6 sm:p-8">
            <div class="flex items-start justify-between mb-6">
                <div><h3 class="text-2xl font-bold text-white">Sign In</h3></div>
                <button type="button" onclick="hideLoginModal()" class="text-gray-400 bg-transparent hover:bg-gray-200/20 hover:text-white rounded-lg text-sm p-1.5 ml-auto">&times;</button>
            </div>
            <div id="login-error-message" class="px-4 py-3 rounded-md text-sm border bg-red-500/20 border-red-500/30 text-red-200 mb-4" style="display: none;"></div>
            <form id="loginForm" class="space-y-6">
                {% csrf_token %}
                <div><label for="login_username" class="block text-sm font-medium text-gray-200 mb-2">Username</label><input type="text" id="login_username" name="username" required></div>
                <div><label for="login_password" class="block text-sm font-medium text-gray-200 mb-2">Password</label><input type="password" id="login_password" name="password" required></div>
                <button type="submit" class="w-full bg-teal-500/80 text-white font-medium py-3 px-4 rounded-lg hover:bg-teal-500">Sign In</button>
            </form>
        </div>
    </div>
</div>
<script>
    function showLoginModal() { document.getElementById('loginModal').style.display = 'block'; }
    function hideLoginModal() { document.getElementById('loginModal').style.display = 'none'; }
    document.getElementById("loginForm").addEventListener("submit", async function(e) {
        e.preventDefault();
        const response = await fetch("{% url 'main:login_ajax' %}", {
            method: "POST",
            body: new FormData(this),
        });
        const data = await response.json();
        if (data.status === 'success') {
            hideLoginModal();
            showToast("Success", data.message, "success");
            setTimeout(() => window.location.reload(), 1500);
        } else {
            const errorMsg = document.getElementById('login-error-message');
            errorMsg.textContent = data.message;
            errorMsg.style.display = 'block';
        }
    });
</script>